<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gas Tracker - Live Crypto Fees f√ºr 9 Blockchains</title>
    <meta name="description" content="Echtzeitvergleich der Transaktionsgeb√ºhren f√ºr Ethereum, Bitcoin, Solana, Polygon, BNB Chain, Avalanche, Arbitrum, Optimism und TRON.">
    <meta name="keywords" content="Gas Fees, Ethereum, Bitcoin, Solana, Polygon, BNB, Avalanche, Arbitrum, Optimism, TRON, Crypto, Blockchain">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
        
        .hover\:scale-105:hover {
            transform: scale(1.05);
        }
        
        .transition-all {
            transition: all 0.3s ease;
        }

        .coin-button {
            min-width: 80px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.875rem;
        }

        .coin-button.active {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .coin-button.inactive {
            background-color: rgba(51, 65, 85, 0.6);
            color: rgba(156, 163, 175, 1);
        }

        .coin-button.inactive:hover {
            background-color: rgba(71, 85, 105, 0.8);
            color: white;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Simple SVG Icons
        const Fuel = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="3" x2="15" y1="22" y2="22"></line>
                <line x1="4" x2="14" y1="9" y2="9"></line>
                <path d="M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18"></path>
                <path d="M14 13h2a2 2 0 0 1 2 2v2a1 1 0 0 0 1 1h2"></path>
                <path d="M19 13v-2a1 1 0 0 0-1-1h-2"></path>
            </svg>
        );

        const TrendingUp = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="22,7 13.5,15.5 8.5,10.5 2,17"></polyline>
                <polyline points="16,7 22,7 22,13"></polyline>
            </svg>
        );

        const ArrowUp = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="12" x2="12" y1="19" y2="5"></line>
                <polyline points="5,12 12,5 19,12"></polyline>
            </svg>
        );

        const ArrowDown = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="12" x2="12" y1="5" y2="19"></line>
                <polyline points="19,12 12,19 5,12"></polyline>
            </svg>
        );

        const Minus = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="5" x2="19" y1="12" y2="12"></line>
            </svg>
        );

        const MultiChainFeeTracker = () => {
            // All 9 coins defined upfront
            const allCoins = [
                { id: 'ethereum', name: 'Ethereum', symbol: 'ETH', icon: '‚ü†', gradient: 'from-blue-500 to-purple-600' },
                { id: 'bitcoin', name: 'Bitcoin', symbol: 'BTC', icon: '‚Çø', gradient: 'from-orange-400 to-yellow-600' },
                { id: 'solana', name: 'Solana', symbol: 'SOL', icon: '‚óé', gradient: 'from-purple-400 to-pink-600' },
                { id: 'polygon', name: 'Polygon', symbol: 'MATIC', icon: '‚¨°', gradient: 'from-purple-500 to-indigo-600' },
                { id: 'bnb', name: 'BNB Chain', symbol: 'BNB', icon: 'üü°', gradient: 'from-yellow-400 to-orange-500' },
                { id: 'avalanche', name: 'Avalanche', symbol: 'AVAX', icon: 'üî∫', gradient: 'from-red-400 to-red-600' },
                { id: 'arbitrum', name: 'Arbitrum', symbol: 'ARB', icon: 'üîµ', gradient: 'from-blue-400 to-cyan-500' },
                { id: 'optimism', name: 'Optimism', symbol: 'OP', icon: 'üî¥', gradient: 'from-red-500 to-pink-500' },
                { id: 'tron', name: 'TRON', symbol: 'TRX', icon: '‚ö°', gradient: 'from-red-600 to-orange-600' }
            ];

            const [selectedCoin, setSelectedCoin] = useState('ethereum');
            const [loading, setLoading] = useState(true);
            
            // Default fee data for all chains
            const defaultFeeData = {
                ethereum: { slow: 15, standard: 25, fast: 35, instant: 50, unit: 'gwei' },
                bitcoin: { slow: 5, standard: 10, fast: 20, instant: 30, unit: 'sat/vB' },
                solana: { slow: 0.000005, standard: 0.000005, fast: 0.00001, instant: 0.000015, unit: 'SOL' },
                polygon: { slow: 1, standard: 2, fast: 5, instant: 10, unit: 'gwei' },
                bnb: { slow: 3, standard: 5, fast: 8, instant: 12, unit: 'gwei' },
                avalanche: { slow: 20, standard: 25, fast: 30, instant: 40, unit: 'nAVAX' },
                arbitrum: { slow: 0.1, standard: 0.2, fast: 0.5, instant: 1, unit: 'gwei' },
                optimism: { slow: 0.001, standard: 0.002, fast: 0.005, instant: 0.01, unit: 'ETH' },
                tron: { slow: 0, standard: 0, fast: 1, instant: 2, unit: 'TRX' }
            };

            // Default price data
            const defaultPrices = {
                ethereum: 3400, bitcoin: 67000, solana: 130, polygon: 0.85, bnb: 310,
                avalanche: 35, arbitrum: 1.2, optimism: 2.1, tron: 0.11
            };

            const defaultTrends = {
                ethereum: 2.5, bitcoin: -1.2, solana: 5.8, polygon: 3.2, bnb: -0.8,
                avalanche: 4.1, arbitrum: 6.3, optimism: 2.7, tron: 1.5
            };

            const [feeData, setFeeData] = useState(defaultFeeData[selectedCoin]);
            const [prices, setPrices] = useState(defaultPrices);
            const [trends, setTrends] = useState(defaultTrends);
            const [isLive, setIsLive] = useState(false);

            // Fetch data function
            const fetchData = async () => {
                try {
                    // Set fee data based on selected coin
                    setFeeData({
                        ...defaultFeeData[selectedCoin],
                        timestamp: new Date().toISOString()
                    });

                    // Fetch live prices
                    try {
                        const priceResponse = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=ethereum,bitcoin,solana,matic-network,binancecoin,avalanche-2,arbitrum,optimism,tron&vs_currencies=usd&include_24hr_change=true');
                        const priceResult = await priceResponse.json();
                        
                        if (priceResult && priceResult.ethereum) {
                            const livePrices = {
                                ethereum: priceResult.ethereum?.usd || defaultPrices.ethereum,
                                bitcoin: priceResult.bitcoin?.usd || defaultPrices.bitcoin,
                                solana: priceResult.solana?.usd || defaultPrices.solana,
                                polygon: priceResult['matic-network']?.usd || defaultPrices.polygon,
                                bnb: priceResult.binancecoin?.usd || defaultPrices.bnb,
                                avalanche: priceResult['avalanche-2']?.usd || defaultPrices.avalanche,
                                arbitrum: priceResult.arbitrum?.usd || defaultPrices.arbitrum,
                                optimism: priceResult.optimism?.usd || defaultPrices.optimism,
                                tron: priceResult.tron?.usd || defaultPrices.tron
                            };

                            const liveTrends = {
                                ethereum: priceResult.ethereum?.usd_24h_change || 0,
                                bitcoin: priceResult.bitcoin?.usd_24h_change || 0,
                                solana: priceResult.solana?.usd_24h_change || 0,
                                polygon: priceResult['matic-network']?.usd_24h_change || 0,
                                bnb: priceResult.binancecoin?.usd_24h_change || 0,
                                avalanche: priceResult['avalanche-2']?.usd_24h_change || 0,
                                arbitrum: priceResult.arbitrum?.usd_24h_change || 0,
                                optimism: priceResult.optimism?.usd_24h_change || 0,
                                tron: priceResult.tron?.usd_24h_change || 0
                            };

                            setPrices(livePrices);
                            setTrends(liveTrends);
                            setIsLive(true);
                        }
                    } catch (e) {
                        console.log('Price API failed, using defaults');
                    }

                } catch (error) {
                    console.error('Fetch error:', error);
                } finally {
                    setLoading(false);
                }
            };

            // Load data on mount and coin change
            useEffect(() => {
                setLoading(true);
                fetchData();
            }, [selectedCoin]);

            // Auto refresh
            useEffect(() => {
                const interval = setInterval(fetchData, 30000);
                return () => clearInterval(interval);
            }, [selectedCoin]);

            // Get current coin data
            const currentCoin = allCoins.find(c => c.id === selectedCoin) || allCoins[0];
            const currentPrice = prices[selectedCoin] || 0;
            const currentTrend = trends[selectedCoin] || 0;

            // Format values
            const formatFeeValue = (value, coin) => {
                if (coin === 'solana') return `${(value * 1000000).toFixed(0)} lamports`;
                if (coin === 'tron' && value === 0) return 'Kostenlos';
                return `${value} ${feeData.unit}`;
            };

            // Calculate cost
            const calculateCost = (gasPrice, gasLimit) => {
                if (!gasPrice || !currentPrice) return 0;
                
                switch(selectedCoin) {
                    case 'ethereum':
                    case 'polygon':
                    case 'bnb':
                    case 'avalanche':
                    case 'arbitrum':
                        return ((gasPrice * gasLimit) / 1000000000) * currentPrice;
                    case 'bitcoin':
                        return ((gasPrice * gasLimit / 100000000) * currentPrice);
                    case 'solana':
                    case 'optimism':
                    case 'tron':
                        return gasPrice * currentPrice;
                    default:
                        return 0;
                }
            };

            // Get transaction types
            const getTransactionTypes = () => {
                const types = {
                    ethereum: [
                        { name: 'Simple Transfer', gasLimit: 21000, icon: 'üí∏' },
                        { name: 'ERC-20 Transfer', gasLimit: 65000, icon: 'ü™ô' },
                        { name: 'Uniswap Swap', gasLimit: 150000, icon: 'üîÑ' },
                        { name: 'NFT Mint', gasLimit: 200000, icon: 'üñºÔ∏è' },
                        { name: 'DeFi Transaction', gasLimit: 350000, icon: 'üè¶' }
                    ],
                    bitcoin: [
                        { name: 'Simple Transfer', gasLimit: 140, icon: 'üí∏' },
                        { name: 'Multi-Input TX', gasLimit: 250, icon: 'üîó' },
                        { name: 'SegWit Transfer', gasLimit: 110, icon: '‚ö°' },
                        { name: 'Taproot Transfer', gasLimit: 100, icon: 'üåø' },
                        { name: 'Complex Script', gasLimit: 400, icon: 'üìú' }
                    ],
                    polygon: [
                        { name: 'Simple Transfer', gasLimit: 21000, icon: 'üí∏' },
                        { name: 'Token Transfer', gasLimit: 65000, icon: 'ü™ô' },
                        { name: 'QuickSwap Trade', gasLimit: 120000, icon: 'üîÑ' },
                        { name: 'NFT Mint', gasLimit: 180000, icon: 'üñºÔ∏è' },
                        { name: 'DeFi Interaction', gasLimit: 300000, icon: 'üè¶' }
                    ],
                    bnb: [
                        { name: 'Simple Transfer', gasLimit: 21000, icon: 'üí∏' },
                        { name: 'BEP-20 Transfer', gasLimit: 65000, icon: 'ü™ô' },
                        { name: 'PancakeSwap Trade', gasLimit: 150000, icon: 'ü•û' },
                        { name: 'NFT Mint', gasLimit: 200000, icon: 'üñºÔ∏è' },
                        { name: 'Yield Farming', gasLimit: 350000, icon: 'üåæ' }
                    ]
                };
                
                return types[selectedCoin] || types.ethereum;
            };

            if (loading) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center">
                        <div className="text-center">
                            <div className="w-12 h-12 text-purple-400 animate-pulse mx-auto mb-4">
                                <Fuel />
                            </div>
                            <p className="text-purple-300">Loading {currentCoin.name} Data...</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-4">
                    <div className="max-w-6xl mx-auto">
                        {/* Header */}
                        <div className="text-center mb-8">
                            <div className="flex items-center justify-center mb-4">
                                <div className="w-8 h-8 text-purple-400 mr-3">
                                    <Fuel />
                                </div>
                                <h1 className="text-4xl font-bold text-white">Gas Tracker</h1>
                            </div>
                            <p className="text-purple-300 mb-6">Live Transaktionsgeb√ºhren f√ºr 9 Blockchains</p>
                            
                            {/* Coin Selector - Completely rebuilt */}
                            <div className="mb-6">
                                <div className="bg-slate-800/30 backdrop-blur border border-slate-700/50 rounded-2xl p-4 mx-auto max-w-5xl">
                                    <div className="flex flex-wrap justify-center gap-3">
                                        {allCoins.map((coin, index) => (
                                            <button
                                                key={`${coin.id}-${index}`}
                                                onClick={() => {
                                                    console.log(`Switching to ${coin.id}`);
                                                    setSelectedCoin(coin.id);
                                                }}
                                                className={`coin-button ${
                                                    selectedCoin === coin.id 
                                                        ? `active bg-gradient-to-r ${coin.gradient} text-white` 
                                                        : 'inactive'
                                                }`}
                                            >
                                                <span className="text-lg">{coin.icon}</span>
                                                <span className="font-semibold">{coin.symbol}</span>
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            </div>
                            
                            {/* Price Display */}
                            <div className="flex items-center justify-center gap-6">
                                <div className="flex items-center gap-2 text-purple-200">
                                    <span className="font-semibold">{currentCoin.symbol}:</span>
                                    <span className="font-bold text-white text-xl">
                                        ${currentPrice.toFixed(selectedCoin === 'bitcoin' ? 0 : 2)}
                                    </span>
                                    {isLive && <span className="w-2 h-2 bg-green-400 rounded-full animate-pulse" title="Live data"></span>}
                                    {!isLive && <span className="text-xs text-orange-400">(demo)</span>}
                                </div>
                                <div className="flex items-center gap-1">
                                    {currentTrend > 0 ? <ArrowUp /> : currentTrend < 0 ? <ArrowDown /> : <Minus />}
                                    <span className={currentTrend > 0 ? 'text-green-400' : currentTrend < 0 ? 'text-red-400' : 'text-gray-400'}>
                                        {Math.abs(currentTrend).toFixed(1)}%
                                    </span>
                                </div>
                            </div>
                        </div>

                        {/* Fee Cards */}
                        <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                            {['slow', 'standard', 'fast', 'instant'].map((speed) => {
                                const speedConfig = {
                                    slow: { label: 'Langsam', color: 'text-green-400 bg-green-400/10 border-green-400/20', desc: 'Geld sparen', time: '~5 min' },
                                    standard: { label: 'Standard', color: 'text-blue-400 bg-blue-400/10 border-blue-400/20', desc: 'Ausgewogen', time: '~2 min' },
                                    fast: { label: 'Schnell', color: 'text-orange-400 bg-orange-400/10 border-orange-400/20', desc: 'Schnell', time: '~30s' },
                                    instant: { label: 'Sofort', color: 'text-red-400 bg-red-400/10 border-red-400/20', desc: 'Notfall', time: '~15s' }
                                };
                                
                                const config = speedConfig[speed];
                                
                                return (
                                    <div key={speed} className={`bg-slate-800/50 backdrop-blur border rounded-xl p-6 text-center hover:scale-105 transition-all duration-300 ${config.color}`}>
                                        <div className="mb-3">
                                            <span className="font-semibold text-lg">{config.label}</span>
                                        </div>
                                        <div className="text-2xl font-bold text-white mb-1">
                                            {formatFeeValue(feeData[speed], selectedCoin)}
                                        </div>
                                        <div className="text-sm opacity-70 mb-2">{config.desc}</div>
                                        <div className="text-xs opacity-60">{config.time}</div>
                                    </div>
                                );
                            })}
                        </div>

                        {/* Cost Calculator */}
                        <div className="bg-slate-800/30 backdrop-blur border border-slate-700/50 rounded-xl p-6 mb-8">
                            <h2 className="text-2xl font-bold text-white mb-6 flex items-center">
                                <div className="w-6 h-6 mr-2 text-purple-400">
                                    <TrendingUp />
                                </div>
                                {currentCoin.name} Kostenrechner
                            </h2>
                            
                            <div className="overflow-x-auto">
                                <table className="w-full">
                                    <thead>
                                        <tr className="border-b border-slate-700">
                                            <th className="text-left text-purple-300 py-3 px-2">Transaktionstyp</th>
                                            <th className="text-center text-purple-300 py-3 px-2">Limit</th>
                                            <th className="text-center text-purple-300 py-3 px-2">Langsam</th>
                                            <th className="text-center text-purple-300 py-3 px-2">Standard</th>
                                            <th className="text-center text-purple-300 py-3 px-2">Schnell</th>
                                            <th className="text-center text-purple-300 py-3 px-2">Sofort</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {getTransactionTypes().map((tx, index) => (
                                            <tr key={index} className="border-b border-slate-700/30 hover:bg-slate-700/20">
                                                <td className="py-4 px-2">
                                                    <div className="flex items-center">
                                                        <span className="text-lg mr-3">{tx.icon}</span>
                                                        <span className="text-white font-medium">{tx.name}</span>
                                                    </div>
                                                </td>
                                                <td className="text-center py-4 px-2 text-purple-200">
                                                    {tx.gasLimit.toLocaleString()}
                                                </td>
                                                {['slow', 'standard', 'fast', 'instant'].map(speed => (
                                                    <td key={speed} className="text-center py-4 px-2">
                                                        <div className="text-white font-medium">
                                                            ${calculateCost(feeData[speed], tx.gasLimit).toFixed(4)}
                                                        </div>
                                                    </td>
                                                ))}
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        {/* Footer */}
                        <div className="text-center text-purple-400 text-sm">
                            <div className="mb-2">
                                Aktualisiert: {new Date(feeData.timestamp || new Date()).toLocaleTimeString()} ‚Ä¢ Alle 30s refresh
                            </div>
                            <div className="text-xs opacity-60 mb-4">
                                {isLive ? 'üü¢ Live-Daten von APIs' : 'üü° Demo-Daten - APIs nicht verf√ºgbar'}
                            </div>
                            <div className="flex items-center justify-center gap-4 mb-4">
                                <a 
                                    href="https://twitter.com/cryptosnapnews" 
                                    target="_blank" 
                                    rel="noopener noreferrer"
                                    className="flex items-center gap-2 text-purple-300 hover:text-white transition-colors duration-300"
                                >
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                                    </svg>
                                    <span>Follow @cryptosnapnews</span>
                                </a>
                            </div>
                            <div className="text-xs opacity-40">
                                Made with ‚ù§Ô∏è for the Crypto Community
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<MultiChainFeeTracker />, document.getElementById('root'));
    </script>
</body>
</html>
